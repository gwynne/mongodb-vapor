<!DOCTYPE html>
<html lang="en">
  <head>
    <title>MongoDBVapor  Reference</title>
    <link rel="stylesheet" type="text/css" href="css/jazzy.css" />
    <link rel="stylesheet" type="text/css" href="css/highlight.css" />
    <meta charset="utf-8">
    <script src="js/jquery.min.js" defer></script>
    <script src="js/jazzy.js" defer></script>
    
    <script src="js/lunr.min.js" defer></script>
    <script src="js/typeahead.jquery.js" defer></script>
    <script src="js/jazzy.search.js" defer></script>
  </head>
  <body>


    <a title="MongoDBVapor  Reference"></a>

    <header class="header">
      <p class="header-col header-col--primary">
        <a class="header-link" href="index.html">
          MongoDBVapor 1.1.0-alpha.2 Docs
        </a>
         (99% documented)
      </p>
    
      <p class="header-col--secondary">
        <form role="search" action="search.json">
          <input type="text" placeholder="Search documentation" data-typeahead>
        </form>
      </p>
    
        <p class="header-col header-col--secondary">
          <a class="header-link" href="https://github.com/mongodb/mongodb-vapor">
            <img class="header-icon" src="img/gh.png"/>
            View on GitHub
          </a>
        </p>
    
        <p class="header-col header-col--secondary">
          <a class="header-link" href="dash-feed://https%3A%2F%2Fmongodb.github.io%2Fmongodb-vapor%2Fdocsets%2FMongoDBVapor.xml">
            <img class="header-icon" src="img/dash.png"/>
            Install in Dash
          </a>
        </p>
    </header>

    <p class="breadcrumbs">
      <a class="breadcrumb" href="index.html">MongoDBVapor Reference</a>
      <img class="carat" src="img/carat.png" />
      MongoDBVapor  Reference
    </p>

    <div class="content-wrapper">
      <nav class="navigation">
        <ul class="nav-groups">
          <li class="nav-group-name">
            <a class="nav-group-name-link" href="Vapor%20Extensions.html">Vapor Extensions</a>
            <ul class="nav-group-tasks">
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Extensions/Application.html">Application</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Extensions/Application/MongoDB.html">– MongoDB</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Extensions/Request.html">Request</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Extensions/Request/MongoDB.html">– MongoDB</a>
              </li>
            </ul>
          </li>
          <li class="nav-group-name">
            <a class="nav-group-name-link" href="General%20Guides.html">General Guides</a>
            <ul class="nav-group-tasks">
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="bson-guide.html">BSON-Guide</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="development.html">Development</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="multithreaded-usage.html">Multithreaded-Usage</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="json-interop.html">JSON-Interop</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="codable-guide.html">Codable-Guide</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="bson-migration-guide.html">BSON-Migration-Guide</a>
              </li>
            </ul>
          </li>
          <li class="nav-group-name">
            <a class="nav-group-name-link" href="Core%20Types.html">Core Types</a>
            <ul class="nav-group-tasks">
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Classes/MongoClient.html">MongoClient</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Structs/EventLoopBoundMongoClient.html">EventLoopBoundMongoClient</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Structs/MongoClientOptions.html">MongoClientOptions</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Structs/MongoDatabase.html">MongoDatabase</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Structs/MongoDatabaseOptions.html">MongoDatabaseOptions</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Structs/MongoCollection.html">MongoCollection</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Structs/MongoCollectionOptions.html">MongoCollectionOptions</a>
              </li>
            </ul>
          </li>
          <li class="nav-group-name">
            <a class="nav-group-name-link" href="BSON%20Types.html">BSON Types</a>
            <ul class="nav-group-tasks">
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Enums/BSON.html">BSON</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Enums/BSONType.html">BSONType</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Structs/BSONBinary.html">BSONBinary</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Structs/BSONBinary/Subtype.html">– Subtype</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Structs/BSONCode.html">BSONCode</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Structs/BSONCodeWithScope.html">BSONCodeWithScope</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Structs/BSONDBPointer.html">BSONDBPointer</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Structs/BSONDecimal128.html">BSONDecimal128</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Structs/BSONDocument.html">BSONDocument</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Structs/BSONObjectID.html">BSONObjectID</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Structs/BSONRegularExpression.html">BSONRegularExpression</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Structs/BSONSymbol.html">BSONSymbol</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Structs/BSONTimestamp.html">BSONTimestamp</a>
              </li>
            </ul>
          </li>
          <li class="nav-group-name">
            <a class="nav-group-name-link" href="Replica%20Set%20%26%20Sharded%20Cluster-Related%20Settings.html">Replica Set &amp; Sharded Cluster-Related Settings</a>
            <ul class="nav-group-tasks">
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Structs/ReadConcern.html">ReadConcern</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Structs/ReadPreference.html">ReadPreference</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Structs/ReadPreference/Mode.html">– Mode</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Structs/WriteConcern.html">WriteConcern</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Structs/WriteConcern/W.html">– W</a>
              </li>
            </ul>
          </li>
          <li class="nav-group-name">
            <a class="nav-group-name-link" href="Authentication%20%26%20TLS.html">Authentication &amp; TLS</a>
            <ul class="nav-group-tasks">
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="tls-guide.html">TLS-Guide</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Structs/MongoCredential.html">MongoCredential</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Structs/MongoCredential/Mechanism.html">– Mechanism</a>
              </li>
            </ul>
          </li>
          <li class="nav-group-name">
            <a class="nav-group-name-link" href="Reading%20Data.html">Reading Data</a>
            <ul class="nav-group-tasks">
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Structs/CountDocumentsOptions.html">CountDocumentsOptions</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Structs/DistinctOptions.html">DistinctOptions</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Structs/EstimatedDocumentCountOptions.html">EstimatedDocumentCountOptions</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Structs/FindOneOptions.html">FindOneOptions</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Structs/FindOptions.html">FindOptions</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Structs/AggregateOptions.html">AggregateOptions</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Enums/IndexHint.html">IndexHint</a>
              </li>
            </ul>
          </li>
          <li class="nav-group-name">
            <a class="nav-group-name-link" href="Cursors.html">Cursors</a>
            <ul class="nav-group-tasks">
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Classes/MongoCursor.html">MongoCursor</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Enums/MongoCursorType.html">MongoCursorType</a>
              </li>
            </ul>
          </li>
          <li class="nav-group-name">
            <a class="nav-group-name-link" href="Writing%20Data.html">Writing Data</a>
            <ul class="nav-group-tasks">
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Structs/InsertOneOptions.html">InsertOneOptions</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Structs/InsertOneResult.html">InsertOneResult</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Writing%20Data.html#/s:10MongoSwift17InsertManyOptionsa">InsertManyOptions</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Structs/InsertManyResult.html">InsertManyResult</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Structs/ReplaceOptions.html">ReplaceOptions</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Structs/UpdateOptions.html">UpdateOptions</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Structs/UpdateResult.html">UpdateResult</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Structs/DeleteOptions.html">DeleteOptions</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Structs/DeleteResult.html">DeleteResult</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Structs/FindOneAndDeleteOptions.html">FindOneAndDeleteOptions</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Structs/FindOneAndReplaceOptions.html">FindOneAndReplaceOptions</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Structs/FindOneAndUpdateOptions.html">FindOneAndUpdateOptions</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Enums/ReturnDocument.html">ReturnDocument</a>
              </li>
            </ul>
          </li>
          <li class="nav-group-name">
            <a class="nav-group-name-link" href="Bulk%20Writes.html">Bulk Writes</a>
            <ul class="nav-group-tasks">
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Structs/BulkWriteOptions.html">BulkWriteOptions</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Structs/BulkWriteResult.html">BulkWriteResult</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Enums/WriteModel.html">WriteModel</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Structs/UpdateModelOptions.html">UpdateModelOptions</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Structs/DeleteModelOptions.html">DeleteModelOptions</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Structs/ReplaceOneModelOptions.html">ReplaceOneModelOptions</a>
              </li>
            </ul>
          </li>
          <li class="nav-group-name">
            <a class="nav-group-name-link" href="Errors.html">Errors</a>
            <ul class="nav-group-tasks">
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="error-handling-guide.html">Error-Handling-Guide</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Errors.html#/s:10MongoSwift0A13ErrorProtocolP">MongoErrorProtocol</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Protocols/MongoLabeledError.html">MongoLabeledError</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Errors.html#/s:10MongoSwift0A12RuntimeErrorP">MongoRuntimeError</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Errors.html#/s:10MongoSwift0A11ServerErrorP">MongoServerError</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Errors.html#/s:10MongoSwift0A9UserErrorP">MongoUserError</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Enums/MongoError.html">MongoError</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Enums/MongoError/CommandError.html">– CommandError</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Enums/MongoError/WriteError.html">– WriteError</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Enums/MongoError/BulkWriteError.html">– BulkWriteError</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Enums/MongoError/LogicError.html">– LogicError</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Enums/MongoError/InvalidArgumentError.html">– InvalidArgumentError</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Enums/MongoError/InternalError.html">– InternalError</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Enums/MongoError/ConnectionError.html">– ConnectionError</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Enums/MongoError/AuthenticationError.html">– AuthenticationError</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Enums/MongoError/CompatibilityError.html">– CompatibilityError</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Enums/MongoError/ServerSelectionError.html">– ServerSelectionError</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Enums/MongoError/WriteFailure.html">– WriteFailure</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Enums/MongoError/WriteConcernFailure.html">– WriteConcernFailure</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Enums/MongoError/BulkWriteFailure.html">– BulkWriteFailure</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Enums/BSONError.html">BSONError</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Enums/BSONError/InvalidArgumentError.html">– InvalidArgumentError</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Enums/BSONError/InternalError.html">– InternalError</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Enums/BSONError/LogicError.html">– LogicError</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Enums/BSONError/DocumentTooLargeError.html">– DocumentTooLargeError</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Errors.html#/s:9SwiftBSON17BSONErrorProtocolP">BSONErrorProtocol</a>
              </li>
            </ul>
          </li>
          <li class="nav-group-name">
            <a class="nav-group-name-link" href="Encoding%20and%20Decoding%20BSON.html">Encoding and Decoding BSON</a>
            <ul class="nav-group-tasks">
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Classes/BSONEncoder.html">BSONEncoder</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Classes/BSONEncoder/DateEncodingStrategy.html">– DateEncodingStrategy</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Classes/BSONEncoder/UUIDEncodingStrategy.html">– UUIDEncodingStrategy</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Classes/BSONEncoder/DataEncodingStrategy.html">– DataEncodingStrategy</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Classes/BSONDecoder.html">BSONDecoder</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Classes/BSONDecoder/DateDecodingStrategy.html">– DateDecodingStrategy</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Classes/BSONDecoder/UUIDDecodingStrategy.html">– UUIDDecodingStrategy</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Classes/BSONDecoder/DataDecodingStrategy.html">– DataDecodingStrategy</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Enums/DataCodingStrategy.html">DataCodingStrategy</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Enums/DateCodingStrategy.html">DateCodingStrategy</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Enums/UUIDCodingStrategy.html">UUIDCodingStrategy</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Protocols/CodingStrategyProvider.html">CodingStrategyProvider</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Structs/BSONCoderOptions.html">BSONCoderOptions</a>
              </li>
            </ul>
          </li>
          <li class="nav-group-name">
            <a class="nav-group-name-link" href="Change%20Streams.html">Change Streams</a>
            <ul class="nav-group-tasks">
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="change-streams-guide.html">Change-Streams-Guide</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Classes/ChangeStream.html">ChangeStream</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Structs/ChangeStreamEvent.html">ChangeStreamEvent</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Structs/ChangeStreamOptions.html">ChangeStreamOptions</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Enums/OperationType.html">OperationType</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Structs/ResumeToken.html">ResumeToken</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Structs/FullDocument.html">FullDocument</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Structs/UpdateDescription.html">UpdateDescription</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Structs/UpdateDescription/TruncatedArrayDescription.html">– TruncatedArrayDescription</a>
              </li>
            </ul>
          </li>
          <li class="nav-group-name">
            <a class="nav-group-name-link" href="Index%20Management.html">Index Management</a>
            <ul class="nav-group-tasks">
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Structs/IndexModel.html">IndexModel</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Structs/IndexOptions.html">IndexOptions</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Structs/CreateIndexOptions.html">CreateIndexOptions</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Structs/DropIndexOptions.html">DropIndexOptions</a>
              </li>
            </ul>
          </li>
          <li class="nav-group-name">
            <a class="nav-group-name-link" href="Database%2FCollection%20Management.html">Database/Collection Management</a>
            <ul class="nav-group-tasks">
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Structs/DatabaseSpecification.html">DatabaseSpecification</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Structs/ListDatabasesOptions.html">ListDatabasesOptions</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Structs/DropDatabaseOptions.html">DropDatabaseOptions</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Structs/CollectionSpecification.html">CollectionSpecification</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Structs/CollectionSpecificationInfo.html">CollectionSpecificationInfo</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Structs/ListCollectionsOptions.html">ListCollectionsOptions</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Enums/CollectionType.html">CollectionType</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Structs/CreateCollectionOptions.html">CreateCollectionOptions</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Structs/DropCollectionOptions.html">DropCollectionOptions</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Structs/RenameCollectionOptions.html">RenameCollectionOptions</a>
              </li>
            </ul>
          </li>
          <li class="nav-group-name">
            <a class="nav-group-name-link" href="Sessions%20%26%20Transactions.html">Sessions &amp; Transactions</a>
            <ul class="nav-group-tasks">
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="transactions-guide.html">Transactions-Guide</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Classes/ClientSession.html">ClientSession</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Structs/ClientSessionOptions.html">ClientSessionOptions</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Structs/TransactionOptions.html">TransactionOptions</a>
              </li>
            </ul>
          </li>
          <li class="nav-group-name">
            <a class="nav-group-name-link" href="Command%20Monitoring.html">Command Monitoring</a>
            <ul class="nav-group-tasks">
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Enums/CommandEvent.html">CommandEvent</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Protocols/CommandEventHandler.html">CommandEventHandler</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Structs/CommandStartedEvent.html">CommandStartedEvent</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Structs/CommandSucceededEvent.html">CommandSucceededEvent</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Structs/CommandFailedEvent.html">CommandFailedEvent</a>
              </li>
            </ul>
          </li>
          <li class="nav-group-name">
            <a class="nav-group-name-link" href="Server%20Discovery%20and%20Monitoring%20%28SDAM%29%20Monitoring.html">Server Discovery and Monitoring (SDAM) Monitoring</a>
            <ul class="nav-group-tasks">
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Enums/SDAMEvent.html">SDAMEvent</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Protocols/SDAMEventHandler.html">SDAMEventHandler</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Structs/ServerOpeningEvent.html">ServerOpeningEvent</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Structs/ServerClosedEvent.html">ServerClosedEvent</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Structs/ServerAddress.html">ServerAddress</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Structs/ServerDescription.html">ServerDescription</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Structs/ServerDescription/ServerType.html">– ServerType</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Structs/ServerDescriptionChangedEvent.html">ServerDescriptionChangedEvent</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Structs/ServerHeartbeatStartedEvent.html">ServerHeartbeatStartedEvent</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Structs/ServerHeartbeatFailedEvent.html">ServerHeartbeatFailedEvent</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Structs/ServerHeartbeatSucceededEvent.html">ServerHeartbeatSucceededEvent</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Structs/TopologyOpeningEvent.html">TopologyOpeningEvent</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Structs/TopologyClosedEvent.html">TopologyClosedEvent</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Structs/TopologyDescriptionChangedEvent.html">TopologyDescriptionChangedEvent</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Structs/TopologyDescription.html">TopologyDescription</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Structs/TopologyDescription/TopologyType.html">– TopologyType</a>
              </li>
            </ul>
          </li>
          <li class="nav-group-name">
            <a class="nav-group-name-link" href="Other%20Classes.html">Other Classes</a>
            <ul class="nav-group-tasks">
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Classes/ExtendedJSONDecoder.html">ExtendedJSONDecoder</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Classes/ExtendedJSONEncoder.html">ExtendedJSONEncoder</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Classes/ExtendedJSONEncoder/Format.html">– Format</a>
              </li>
            </ul>
          </li>
          <li class="nav-group-name">
            <a class="nav-group-name-link" href="Other%20Functions.html">Other Functions</a>
            <ul class="nav-group-tasks">
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Other%20Functions.html#/s:10MongoSwift26addWrappingLibraryMetadata4name7versionySS_SStF">addWrappingLibraryMetadata(name:version:)</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Other%20Functions.html#/s:10MongoSwift07cleanupaB0yyF">cleanupMongoSwift()</a>
              </li>
            </ul>
          </li>
          <li class="nav-group-name">
            <a class="nav-group-name-link" href="Other%20Structs.html">Other Structures</a>
            <ul class="nav-group-tasks">
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Structs/Compressor.html">Compressor</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Structs/MongoConnectionString.html">MongoConnectionString</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Structs/MongoConnectionString/Scheme.html">– Scheme</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Structs/MongoConnectionString/HostIdentifier.html">– HostIdentifier</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Structs/MongoNamespace.html">MongoNamespace</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Structs/MongoServerAPI.html">MongoServerAPI</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Structs/MongoServerAPI/Version.html">– Version</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Structs/RunCommandOptions.html">RunCommandOptions</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Structs/TimeseriesOptions.html">TimeseriesOptions</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Structs/TimeseriesOptions/Granularity.html">– Granularity</a>
              </li>
            </ul>
          </li>
        </ul>
      </nav>
      <article class="main-content">

        <section class="section">
          <div class="section-content top-matter">
            
            <h1 id='mongodbvapor' class='heading'>MongoDBVapor</h1>

<p>A library for building applications with <a href="https://www.mongodb.com/">MongoDB</a> + <a href="https://vapor.codes/">Vapor</a>.</p>

<ul>
<li><a href="#documentation">Documentation</a></li>
<li><a href="#bugs---feature-requests">Bugs / Feature Requests</a></li>
<li><a href="#installation">Installation</a>

<ul>
<li><a href="#step-1-install-required-system-libraries-linux-only">Step 1: Install Required System Libraries (Linux Only)</a></li>
<li><a href="#step-2-install-mongodbvapor">Step 2: Install MongoDBVapor</a></li>
<li><a href="#create-a-new-project-from-a-template">Create a new project from a template</a></li>
<li><a href="#add-to-a-project-manually">Add to a project manually</a></li>
</ul></li>
<li><a href="#docker-usage">Docker Usage</a></li>
<li><a href="#example-usage">Example Usage</a>

<ul>
<li><a href="#configure-global-settings">Configure global settings</a></li>
<li><a href="#use-mongodb-in-a-request-handler">Use MongoDB in a Request Handler</a>

<ul>
<li><a href="#asyncawait-apis">Async/Await APIs</a></li>
<li><a href="#eventloopfuture-apis"><code>EventLoopFuture</code> APIs</a></li>
</ul></li>
<li><a href="#perform-one-time-setup-or-teardown-code">Perform one-time setup or teardown code</a></li>
<li><a href="#working-with-extended-json">Working with Extended JSON</a></li>
</ul></li>
</ul>
<h2 id='documentation' class='heading'>Documentation</h2>
<h3 id='the-latest-documentation-for-the-library-is-available-a-href-https-mongodb-github-io-mongodb-vapor-here-a' class='heading'>The latest documentation for the library is available <a href="https://mongodb.github.io/mongodb-vapor/">here</a>.</h3>
<h3 id='you-can-find-a-complete-example-project-built-using-this-library-a-href-https-github-com-mongodb-mongo-swift-driver-tree-main-examples-vaporexample-here-a' class='heading'>You can find a complete example project built using this library <a href="https://github.com/mongodb/mongo-swift-driver/tree/main/Examples/VaporExample">here</a>!</h3>
<h2 id='bugs-feature-requests' class='heading'>Bugs / Feature Requests</h2>

<p>Think you&rsquo;ve found a bug? Want to see a new feature in <code>mongodb-vapor</code>? Please open a case in our issue management tool, JIRA:</p>

<ol>
<li>Create an account and login: <a href="https://jira.mongodb.org">jira.mongodb.org</a></li>
<li>Navigate to the SWIFT project: <a href="https://jira.mongodb.org/browse/SWIFT">jira.mongodb.org/browse/SWIFT</a></li>
<li>Click <strong>Create Issue</strong> - Please provide as much information as possible about the issue and how to reproduce it.</li>
</ol>

<p>Bug reports in JIRA for all driver projects (i.e. NODE, PYTHON, CSHARP, JAVA) and the
Core Server (i.e. SERVER) project are <strong>public</strong>.</p>
<h2 id='installation' class='heading'>Installation</h2>

<p>This library works with <strong>Swift 5.2+</strong> , and supports Linux and macOS usage. The minimum macOS version required is <strong>10.15</strong>.</p>

<p>Installation is supported via <a href="https://swift.org/package-manager/">Swift Package Manager</a>.</p>
<h3 id='step-1-install-required-system-libraries-linux-only' class='heading'>Step 1: Install Required System Libraries (Linux Only)</h3>

<p>If you are using macOS, you can skip ahead.</p>

<p>The driver vendors and wraps the MongoDB C driver (<code>libmongoc</code>), which depends on a number of external C libraries when built in Linux environments. As a result, these libraries must be installed on your system in order to build MongoSwift.</p>

<p>To install those libraries, please follow the <a href="http://mongoc.org/libmongoc/current/installing.html#prerequisites-for-libmongoc">instructions</a> from <code>libmongoc</code>&lsquo;s documentation.</p>
<h3 id='step-2-install-mongodbvapor' class='heading'>Step 2: Install MongoDBVapor</h3>
<h4 id='create-a-new-project-from-a-template' class='heading'>Create a New Project From a Template</h4>

<p>To create a new project using the library, the easiest way to get started is by using
Vapor&rsquo;s command line tool, <a href="https://github.com/vapor/toolbox">Vapor Toolbox</a>, along with our application template:</p>
<pre class="highlight plaintext"><code>vapor new MyProject --template https://github.com/mongodb/mongodb-vapor-template/
</code></pre>

<p>This will create a new project from a template, which you can edit to your liking. See the instructions <a href="https://github.com/mongodb/mongodb-vapor-template/blob/main/README.md">here</a> or in the generated README for more details on the generated project.</p>
<h4 id='add-to-a-project-manually' class='heading'>Add to a Project Manually</h4>

<p>Alternatively, you can integrate this library manually in a SwiftPM project by adding it along with Vapor as dependencies in your project&rsquo;s <code>Package.swift</code> file:</p>
<pre class="highlight swift"><code><span class="c1">// swift-tools-version:5.2</span>
<span class="kd">import</span> <span class="kt">PackageDescription</span>

<span class="k">let</span> <span class="nv">package</span> <span class="o">=</span> <span class="kt">Package</span><span class="p">(</span>
    <span class="nv">name</span><span class="p">:</span> <span class="s">"VaporExample"</span><span class="p">,</span>
    <span class="nv">platforms</span><span class="p">:</span> <span class="p">[</span>
        <span class="o">.</span><span class="nf">macOS</span><span class="p">(</span><span class="o">.</span><span class="n">v10_15</span><span class="p">)</span>
    <span class="p">],</span>
    <span class="nv">dependencies</span><span class="p">:</span> <span class="p">[</span>
        <span class="o">.</span><span class="nf">package</span><span class="p">(</span><span class="nv">url</span><span class="p">:</span> <span class="s">"https://github.com/vapor/vapor"</span><span class="p">,</span> <span class="o">.</span><span class="nf">upToNextMajor</span><span class="p">(</span><span class="nv">from</span><span class="p">:</span> <span class="s">"4.7.0"</span><span class="p">)),</span>
        <span class="o">.</span><span class="nf">package</span><span class="p">(</span><span class="nv">url</span><span class="p">:</span> <span class="s">"https://github.com/mongodb/mongodb-vapor"</span><span class="p">,</span> <span class="o">.</span><span class="nf">upToNextMajor</span><span class="p">(</span><span class="nv">from</span><span class="p">:</span> <span class="s">"1.1.0-alpha.1"</span><span class="p">))</span>
    <span class="p">],</span>
    <span class="nv">targets</span><span class="p">:</span> <span class="p">[</span>
        <span class="o">.</span><span class="nf">target</span><span class="p">(</span>
            <span class="nv">name</span><span class="p">:</span> <span class="s">"App"</span><span class="p">,</span>
            <span class="nv">dependencies</span><span class="p">:</span> <span class="p">[</span>
                <span class="o">.</span><span class="nf">product</span><span class="p">(</span><span class="nv">name</span><span class="p">:</span> <span class="s">"Vapor"</span><span class="p">,</span> <span class="nv">package</span><span class="p">:</span> <span class="s">"vapor"</span><span class="p">),</span>
                <span class="o">.</span><span class="nf">product</span><span class="p">(</span><span class="nv">name</span><span class="p">:</span> <span class="s">"MongoDBVapor"</span><span class="p">,</span> <span class="nv">package</span><span class="p">:</span> <span class="s">"mongodb-vapor"</span><span class="p">)</span>
            <span class="p">]</span>
        <span class="p">),</span>
        <span class="o">.</span><span class="nf">target</span><span class="p">(</span><span class="nv">name</span><span class="p">:</span> <span class="s">"Run"</span><span class="p">,</span> <span class="nv">dependencies</span><span class="p">:</span> <span class="p">[</span>
            <span class="o">.</span><span class="nf">target</span><span class="p">(</span><span class="nv">name</span><span class="p">:</span> <span class="s">"App"</span><span class="p">),</span>
            <span class="o">.</span><span class="nf">product</span><span class="p">(</span><span class="nv">name</span><span class="p">:</span> <span class="s">"MongoDBVapor"</span><span class="p">,</span> <span class="nv">package</span><span class="p">:</span> <span class="s">"mongodb-vapor"</span><span class="p">)</span>
        <span class="p">])</span>
    <span class="p">]</span>
<span class="p">)</span>
</code></pre>

<p>Then run <code>swift build</code> to download, compile, and link all your dependencies.</p>
<h2 id='docker-usage' class='heading'>Docker Usage</h2>

<p>Note that if you are using this library on Docker with Vapor&rsquo;s default Docker template file, you&rsquo;ll need to install the system
dependencies the driver requires on Linux, as mentioned <a href="#step-1-install-required-system-libraries-linux-only">above</a>.</p>

<p>To do this, add the following to your Dockerfile:</p>
<pre class="highlight plaintext"><code>RUN apt-get update &amp;&amp; apt-get install -y libssl-dev
</code></pre>

<p>A user <a href="https://github.com/dotmain">@dotmain</a> has also created a Vapor template that includes Docker configuration <a href="https://github.com/dotmain/native-mongo-vapor-template">here</a>.</p>
<h2 id='example-usage' class='heading'>Example Usage</h2>
<h3 id='you-can-find-a-complete-example-project-built-using-this-library-a-href-https-github-com-mongodb-mongo-swift-driver-tree-main-examples-vaporexample-here-a' class='heading'>You can find a complete example project built using this library <a href="https://github.com/mongodb/mongo-swift-driver/tree/main/Examples/VaporExample">here</a>.</h3>

<p>To summarize the available features:</p>
<h3 id='configure-global-settings' class='heading'>Configure global settings</h3>

<p>In your <code>configure(_:)</code> method in <code>App/configure.swift</code>, add:</p>
<pre class="highlight swift"><code><span class="c1">// Configure the app for using a MongoDB server at the provided connection string.</span>
<span class="k">try</span> <span class="n">app</span><span class="o">.</span><span class="n">mongoDB</span><span class="o">.</span><span class="nf">configure</span><span class="p">(</span><span class="s">"mongodb://localhost:27017"</span><span class="p">)</span>
</code></pre>

<p>In <code>Run/main.swift</code>, add:</p>
<pre class="highlight swift"><code><span class="kd">import</span> <span class="kt">MongoDBVapor</span>

<span class="k">defer</span> <span class="p">{</span>
    <span class="c1">// Cleanup the application's MongoDB data.</span>
    <span class="n">app</span><span class="o">.</span><span class="n">mongoDB</span><span class="o">.</span><span class="nf">cleanup</span><span class="p">()</span>
    <span class="c1">// Clean up the driver's global state. The driver will no longer be usable from this program after this method is</span>
    <span class="c1">// called.</span>
    <span class="nf">cleanupMongoSwift</span><span class="p">()</span>
<span class="p">}</span>
</code></pre>
<h3 id='use-mongodb-in-a-request-handler' class='heading'>Use MongoDB in a Request Handler</h3>
<h4 id='async-await-apis' class='heading'>Async/Await APIs</h4>

<p>For collections you plan to access frequently, we recommend adding computed properties in an extension to <code>Request</code>
to provide easy access, like:</p>
<pre class="highlight swift"><code><span class="kd">extension</span> <span class="kt">Request</span> <span class="p">{</span>
    <span class="c1">/// A collection with an associated `Codable` type `Kitten`.</span>
    <span class="k">var</span> <span class="nv">kittenCollection</span><span class="p">:</span> <span class="kt">MongoCollection</span><span class="o">&lt;</span><span class="kt">Kitten</span><span class="o">&gt;</span> <span class="p">{</span>
        <span class="k">self</span><span class="o">.</span><span class="n">application</span><span class="o">.</span><span class="n">mongoDB</span><span class="o">.</span><span class="n">client</span><span class="o">.</span><span class="nf">db</span><span class="p">(</span><span class="s">"home"</span><span class="p">)</span><span class="o">.</span><span class="nf">collection</span><span class="p">(</span><span class="s">"kittens"</span><span class="p">,</span> <span class="nv">withType</span><span class="p">:</span> <span class="kt">Kitten</span><span class="o">.</span><span class="k">self</span><span class="p">)</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre>

<p>You can then use these in request handlers as follows:</p>
<pre class="highlight swift"><code><span class="c1">/// Handles a request to load the list of kittens.</span>
<span class="n">app</span><span class="o">.</span><span class="nf">get</span><span class="p">(</span><span class="s">"kittens"</span><span class="p">)</span> <span class="p">{</span> <span class="n">req</span> <span class="n">async</span> <span class="k">throws</span> <span class="o">-&gt;</span> <span class="p">[</span><span class="kt">Kitten</span><span class="p">]</span> <span class="k">in</span>
    <span class="k">try</span> <span class="n">await</span> <span class="n">req</span><span class="o">.</span><span class="n">kittenCollection</span><span class="o">.</span><span class="nf">find</span><span class="p">()</span><span class="o">.</span><span class="nf">toArray</span><span class="p">()</span>
<span class="p">}</span>

<span class="c1">/// Handles a request to add a new kitten.</span>
<span class="n">app</span><span class="o">.</span><span class="nf">post</span><span class="p">(</span><span class="s">"kittens"</span><span class="p">)</span> <span class="p">{</span> <span class="n">req</span> <span class="n">async</span> <span class="k">throws</span> <span class="o">-&gt;</span> <span class="kt">Response</span> <span class="k">in</span>
    <span class="k">let</span> <span class="nv">newKitten</span> <span class="o">=</span> <span class="k">try</span> <span class="n">req</span><span class="o">.</span><span class="n">content</span><span class="o">.</span><span class="nf">decode</span><span class="p">(</span><span class="kt">Kitten</span><span class="o">.</span><span class="k">self</span><span class="p">)</span>
    <span class="k">try</span> <span class="n">await</span> <span class="n">req</span><span class="o">.</span><span class="n">kittenCollection</span><span class="o">.</span><span class="nf">insertOne</span><span class="p">(</span><span class="n">newKitten</span><span class="p">)</span>
    <span class="k">return</span> <span class="kt">Response</span><span class="p">(</span><span class="nv">status</span><span class="p">:</span> <span class="o">.</span><span class="n">created</span><span class="p">)</span>
<span class="p">}</span>
</code></pre>
<h4 id='code-eventloopfuture-code-apis' class='heading'><code>EventLoopFuture</code> APIs</h4>

<p>For collections you plan to access frequently, we recommend adding computed properties in an extension to <code>Request</code>
to provide easy access, like:</p>
<pre class="highlight swift"><code><span class="kd">extension</span> <span class="kt">Request</span> <span class="p">{</span>
    <span class="c1">/// A collection with an associated `Codable` type `Kitten`.</span>
    <span class="k">var</span> <span class="nv">kittenCollection</span><span class="p">:</span> <span class="kt">MongoCollection</span><span class="o">&lt;</span><span class="kt">Kitten</span><span class="o">&gt;</span> <span class="p">{</span>
        <span class="k">self</span><span class="o">.</span><span class="n">mongoDB</span><span class="o">.</span><span class="n">client</span><span class="o">.</span><span class="nf">db</span><span class="p">(</span><span class="s">"home"</span><span class="p">)</span><span class="o">.</span><span class="nf">collection</span><span class="p">(</span><span class="s">"kittens"</span><span class="p">,</span> <span class="nv">withType</span><span class="p">:</span> <span class="kt">Kitten</span><span class="o">.</span><span class="k">self</span><span class="p">)</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre>

<p><strong>Any client, database, or collection object you access via <code><a href="Extensions/Request.html#/s:5Vapor7RequestC12MongoDBVaporE7mongoDBAcDE0cF0Vvp">Request.mongoDB</a></code> will automatically return <code>EventLoopFuture</code>s 
on the same <code>EventLoop</code> the <code>Request</code> is being handled on, simplifying thread safety concerns and improving performance
by removing the need to <code>hop</code> the returned futures.</strong></p>

<p>You can then use these in request handlers as follows:</p>
<pre class="highlight swift"><code><span class="c1">/// Handles a request to load the list of kittens.</span>
<span class="n">app</span><span class="o">.</span><span class="nf">get</span><span class="p">(</span><span class="s">"kittens"</span><span class="p">)</span> <span class="p">{</span> <span class="n">req</span> <span class="o">-&gt;</span> <span class="kt">EventLoopFuture</span><span class="o">&lt;</span><span class="p">[</span><span class="kt">Kitten</span><span class="p">]</span><span class="o">&gt;</span> <span class="k">in</span>
    <span class="n">req</span><span class="o">.</span><span class="n">kittenCollection</span><span class="o">.</span><span class="nf">find</span><span class="p">()</span><span class="o">.</span><span class="n">flatMap</span> <span class="p">{</span> <span class="n">cursor</span> <span class="k">in</span>
        <span class="n">cursor</span><span class="o">.</span><span class="nf">toArray</span><span class="p">()</span>
    <span class="p">}</span>
<span class="p">}</span>

<span class="c1">/// Handles a request to add a new kitten.</span>
<span class="n">app</span><span class="o">.</span><span class="nf">post</span><span class="p">(</span><span class="s">"kittens"</span><span class="p">)</span> <span class="p">{</span> <span class="n">req</span> <span class="o">-&gt;</span> <span class="kt">EventLoopFuture</span><span class="o">&lt;</span><span class="kt">Response</span><span class="o">&gt;</span> <span class="k">in</span>
    <span class="k">let</span> <span class="nv">newKitten</span> <span class="o">=</span> <span class="k">try</span> <span class="n">req</span><span class="o">.</span><span class="n">content</span><span class="o">.</span><span class="nf">decode</span><span class="p">(</span><span class="kt">Kitten</span><span class="o">.</span><span class="k">self</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">req</span><span class="o">.</span><span class="n">kittenCollection</span><span class="o">.</span><span class="nf">insertOne</span><span class="p">(</span><span class="n">newKitten</span><span class="p">)</span>
        <span class="o">.</span><span class="n">map</span> <span class="p">{</span> <span class="n">_</span> <span class="k">in</span> <span class="kt">Response</span><span class="p">(</span><span class="nv">status</span><span class="p">:</span> <span class="o">.</span><span class="n">created</span><span class="p">)</span> <span class="p">}</span>
<span class="p">}</span>
</code></pre>
<h3 id='perform-one-time-setup-or-teardown-code' class='heading'>Perform one-time setup or teardown code</h3>

<p>If you have one-time code you&rsquo;d like to run each time your application starts up, e.g. in <code>Run/main.swift</code>, you can
use the global client, accessible via <code><a href="Extensions/Application.html#/s:5Vapor11ApplicationC12MongoDBVaporE7mongoDBAcDE0cF0Vvp">Application.mongoDB</a></code>:</p>
<pre class="highlight swift"><code><span class="c1">// Configure the app for using a MongoDB server at the provided connection string.</span>
<span class="k">try</span> <span class="n">app</span><span class="o">.</span><span class="n">mongoDB</span><span class="o">.</span><span class="nf">configure</span><span class="p">(</span><span class="s">"mongodb://localhost:27017"</span><span class="p">)</span>
<span class="k">let</span> <span class="nv">coll</span> <span class="o">=</span> <span class="n">app</span><span class="o">.</span><span class="n">mongoDB</span><span class="o">.</span><span class="n">client</span><span class="o">.</span><span class="nf">db</span><span class="p">(</span><span class="s">"home"</span><span class="p">)</span><span class="o">.</span><span class="nf">collection</span><span class="p">(</span><span class="s">"kittens"</span><span class="p">)</span>
<span class="c1">// creates a unique index if it doesn't exist already.</span>
<span class="n">_</span> <span class="o">=</span> <span class="k">try</span> <span class="n">coll</span><span class="o">.</span><span class="nf">createIndex</span><span class="p">([</span><span class="s">"name"</span><span class="p">:</span> <span class="mi">1</span><span class="p">],</span> <span class="nv">indexOptions</span><span class="p">:</span> <span class="kt">IndexOptions</span><span class="p">(</span><span class="nv">unique</span><span class="p">:</span> <span class="kc">true</span><span class="p">))</span><span class="o">.</span><span class="nf">wait</span><span class="p">()</span>
</code></pre>
<h3 id='working-with-extended-json' class='heading'>Working with Extended JSON</h3>

<p>If you&rsquo;d like to use <code><a href="Classes/ExtendedJSONEncoder.html">ExtendedJSONEncoder</a></code> and <code><a href="Classes/ExtendedJSONDecoder.html">ExtendedJSONDecoder</a></code> for encoding/decoding JSON requests/responses, in  <code>App/configure.swift</code>, add:</p>
<pre class="highlight swift"><code><span class="c1">// Use `ExtendedJSONEncoder` and `ExtendedJSONDecoder` for encoding/decoding `Content`.</span>
<span class="kt">ContentConfiguration</span><span class="o">.</span><span class="n">global</span><span class="o">.</span><span class="nf">use</span><span class="p">(</span><span class="nv">encoder</span><span class="p">:</span> <span class="kt">ExtendedJSONEncoder</span><span class="p">(),</span> <span class="nv">for</span><span class="p">:</span> <span class="o">.</span><span class="n">json</span><span class="p">)</span>
<span class="kt">ContentConfiguration</span><span class="o">.</span><span class="n">global</span><span class="o">.</span><span class="nf">use</span><span class="p">(</span><span class="nv">decoder</span><span class="p">:</span> <span class="kt">ExtendedJSONDecoder</span><span class="p">(),</span> <span class="nv">for</span><span class="p">:</span> <span class="o">.</span><span class="n">json</span><span class="p">)</span>
</code></pre>

<p>Note that this is currently required if you want to use <code><a href="Structs/BSONDocument.html">BSONDocument</a></code> as a <code>Content</code> type and e.g.
directly return <code><a href="Structs/BSONDocument.html">BSONDocument</a></code>s from request handlers, because <code><a href="Structs/BSONDocument.html">BSONDocument</a></code> does not yet support 
being encoded/decoded via <code>JSONEncoder</code> and <code>JSONDecoder</code>.</p>

<p>For more information on JSON interoperation in general with the driver, see our 
<a href="https://mongodb.github.io/swift-bson/docs/current/SwiftBSON/json-interop.html">JSON interop guide</a>.</p>

          </div>
        </section>


      </article>
    </div>
    <section class="footer">
      <p>&copy; 2022 <a class="link" href="https://github.com/mongodb/mongodb-vapor" target="_blank" rel="external">Nataly Carbonell, Patrick Freed, Kaitlin Mahar</a>. All rights reserved. (Last updated: 2022-02-24)</p>
      <p>Generated by <a class="link" href="https://github.com/realm/jazzy" target="_blank" rel="external">jazzy ♪♫ v0.13.5</a>, a <a class="link" href="https://realm.io" target="_blank" rel="external">Realm</a> project.</p>
    </section>
  </body>
</div>
</html>
